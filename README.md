# corpus-linguistics
Презентация: https://docs.google.com/presentation/d/1gDYAc5G6Hmo9eKNq9K31qgqoiaa7H2PTL5AKbH-JpBk/edit#slide=id.p

Документы хранятся в plain text. Отдельно генерируется файл metainfo.txt с метаинформацией, которая на данный момент состоит только из ссылки на статью вики.
Для удобства документы разделены на подпапки по алфавиту.

metainfo.txt имеет следующий формат:

...

ARTICLE_NAME : <link>

ARTICLE_NAME : <link>

...

## Токенизатор

В качестве токенизаторов были быбраны стандартные токенизаторы nltk(PennTreebank), построенном на регулярных выражениях. Этот токенизатор оставляет знаки препинания в качестве отдельных токенов. Всего в итоге получилось 419086 предложений и примерно 15М слов(подсчитано к прошлому разу). Разметка составлялась отдельно для каждой статьи и структура папок разметок имеет схожий формат с таковым у корпуса: "<Путь до разметки>/<Первая буква статьи>/<Имя статьи>.csv". Каждая запись имеет в файле разметки имеет следующий формат: <Номер токена в тексте статьи>,<Номер предложения>,<Сам токен>,<Позиция токена в тексте>. Ниже представлен пример такой разметки.

Id,sentence,token,pos

...

24,1,Столица,142

25,1,страны,150

26,1,—,157

27,1,Вильнюс,159

28,1,.,166

29,2,Площадь,169

30,2,—,177

31,2,65,179

32,2,300,182

33,2,км²,186

34,2,.,189

...

Пример по одной статье: https://docs.google.com/document/d/1WJHdjS2bVbtd3MRF2YDrVv9I3TdwKa9fg4I7Wqi8Et8/edit?usp=sharing
Скрипт токенизации: https://github.com/Sarkin/corpus-linguistics/blob/master/Tokenizer.ipynb

### Дальнейшие планы
Далее хотелось бы добавить в разметку по крайней мере начальную форму слов и некоторые метки из словаря Зелезняка. Тогда разметка бы выглядела следующим образом:

Id,sentence,token,pos,origin,label

0,0,Литвой,0,Литва,"сущ ж"

### 15.11
- Добавлена нормальная форма слов в токенизацию с помощью pymorphy2

- Заменена схема записи разметки в файл: теперь все делается с помощью pandas, что позвлило корректно записывать знаки препинания и использовать разметку в машинном обучении.

- Добавлен поиск по корпусу

## Поиск по корпусу
В качестве поискового движка был взят whoosh из-за его относительной простоты и питона. Каждая запись - это статья с заголовком и относительным путем до нее. Сама же утилита работы с движком принимает запрос на контеет статьи(ее текст) и выводит максимум 10 удовлетворяющих ему названий статей, которые легко можно найти по имени в корпусе. Собственно в WhooshEx создается индекс, а в SearchTool используется для поиска статей.


Ниже примеры работы утилиты(слева снизу) и новой разметки(справа)
![GitHub Logo](/screen.png)
Format: ![Alt Text](url)